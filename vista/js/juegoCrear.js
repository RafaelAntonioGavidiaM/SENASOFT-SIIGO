// Rafael
$(document).ready(function() {
    var socket = io.connect("http://localhost:3000", { transports: ['websocket'] });
    socket.on('variable', function(variable) {

        console.log(variable);
        cargarMesa(variable);



    });

    var usuario = "";

    function cargarMesa() {
        var cargarDatosmesa = "ok";

        var objData = new FormData();

        objData.append("cargarDatosTabla", cargarDatosmesa);

        $.ajax({
            url: "control/juegoCrearControl.php",
            type: "post",
            dataType: "json",
            data: objData,
            cache: false,
            contentType: false,
            processData: false,
            success: function(respuesta) {

                $("#mesaNumero").html(respuesta);



            }
        })



    }





    $("#btnCrear").click(function() {
        alert("hola");

        var usuario = $("#txtUsuario").val();
        var codigo = "";
        var valorCodigo = randomColor();
        var nombreUsuarioAdm = $("#txtUsuario").val();
        var codigo = "";

        function randomColor() {
            codigo = Math.floor(Math.random() * 0xffffff).toString(16).padEnd(6, '0');
            //console.log(codigo);

            return codigo;
        }

        var objData = new FormData();
        objData.append("nombreUsuario", usuario);
        objData.append("codigo", valorCodigo);

        $.ajax({
                url: "control/juegoCrearControl.php",
                type: "post",
                dataType: "json",
                data: objData,
                cache: false,
                contentType: false,
                processData: false,
                success: function(respuesta) {
                    alert(respuesta);


                    cargarMesa();
                    socket.emit('variable', valorCodigo);

                    window.location.replace("mesaJuego.php");



                }



            }

        )






    })




























































































































































































































































































































































































































    // Diego















































































































































































































































































































































































































    // Edisson















































































































































































































































































































































































































    // Fin

})