// Rafael
$(document).ready(function() {
    var socket = io.connect("http://192.168.0.104:3000", { transports: ['websocket'] });
    socket.on('variable', function(variable) {

        console.log(variable);
        cargarMesa(variable);



    });

    var usuario = "";

    function cargarMesa() {
        var cargarDatosmesa = "ok";

        var objData = new FormData();

        objData.append("cargarDatosTabla", cargarDatosmesa);

        $.ajax({
            url: "control/juegoCrearControl.php",
            type: "post",
            dataType: "json",
            data: objData,
            cache: false,
            contentType: false,
            processData: false,
            success: function(respuesta) {

                $("#mesaNumero").html(respuesta);



            }
        })



    }

    $("#btnUnirse").click(function() {

        var usuario = $("#txtUsuario").val();
        var unirse = $("#txtUnirse").val();

        var objData = new FormData();

        objData.append("usuarioU", usuario);
        objData.append("codigoUnion", unirse);

        $.ajax({
                url: "control/juegoCrearControl.php",
                type: "post",
                dataType: "json",
                data: objData,
                cache: false,
                contentType: false,
                processData: false,
                success: function(respuesta) {

                    var idPartida = respuesta[0];
                    var usuario = respuesta[1];
                    var codPartida = respuesta[2];

                    var concatenar = idPartida + "," + codPartida;


                    socket.emit('recargarUsuario', codPartida);

                    window.location.replace("mesaJuego.php?usuario=" + usuario + "&id=" + idPartida + "&cod=" + codPartida + "");








                }



            }

        )




    })





    $("#btnCrear").click(function() {
        alert("hola");

        var usuario = $("#txtUsuario").val();
        var codigo = "";
        var valorCodigo = randomColor();
        var nombreUsuarioAdm = $("#txtUsuario").val();
        var codigo = "";

        function randomColor() {
            codigo = Math.floor(Math.random() * 0xffffff).toString(16).padEnd(6, '0');
            //console.log(codigo);

            return codigo;
        }

        var objData = new FormData();
        objData.append("nombreUsuario", usuario);
        objData.append("codigo", valorCodigo);

        $.ajax({
                url: "control/juegoCrearControl.php",
                type: "post",
                dataType: "json",
                data: objData,
                cache: false,
                contentType: false,
                processData: false,
                success: function(respuesta) {
                    alert(respuesta);


                    var idPartida = respuesta[0];
                    var usuario = respuesta[1];
                    var codPartida = respuesta[2];










                    window.location.replace("mesaJuego.php?usuario=" + usuario + "&id=" + idPartida + "&cod=" + codPartida + "");



                }



            }

        )






    })




























































































































































































































































































































































































































    // Diego















































































































































































































































































































































































































    // Edisson















































































































































































































































































































































































































    // Fin

})